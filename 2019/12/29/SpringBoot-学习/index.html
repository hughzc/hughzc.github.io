<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://hughzc.github.io').hostname,
    root: '/',
    scheme: 'Pisces',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="SpringBoot学习涉及的一些知识点 SpringBoot Spring MVC MyBatis MySQL、H2 Flyway Heroku Git&#x2F;Github Maven Restful">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot 学习">
<meta property="og:url" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="未名的奇妙旅程">
<meta property="og:description" content="SpringBoot学习涉及的一些知识点 SpringBoot Spring MVC MyBatis MySQL、H2 Flyway Heroku Git&#x2F;Github Maven Restful">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E5%AF%BC%E8%88%AA%E8%8C%83%E4%BE%8B.png">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E7%90%86%E6%83%B3%E7%A4%BE%E5%8C%BA%E5%AF%BC%E8%88%AA.png">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E5%AE%9E%E9%99%85%E6%95%88%E6%9E%9C.png">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/github%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B.png">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/cookies.png">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E9%BB%98%E8%AE%A4cookie.png">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%B8%89%E5%B1%82%E6%A8%A1%E5%9E%8B.png">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/H2%E5%88%9B%E5%BB%BA.png">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E5%8F%91%E8%B5%B7%E9%97%AE%E9%A2%98%E6%A8%A1%E6%9D%BF.jpg">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E5%A4%A7%E5%B1%8F%E5%B9%95%E5%B0%BA%E5%AF%B8.jpg">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E5%85%B6%E4%BB%96%E5%B1%8F%E5%B9%95%E5%B0%BA%E5%AF%B8.jpg">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E9%97%AE%E9%A2%98%E5%8F%91%E5%B8%83%E7%95%8C%E9%9D%A2.png">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/margin30.jpg">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E5%8F%91%E5%B8%83%E6%8C%89%E9%92%AE.jpg">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E8%AD%A6%E5%91%8A%E6%A1%861.png">
<meta property="og:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E6%A0%87%E9%A2%98%E9%94%99%E4%BD%8D.png">
<meta property="article:published_time" content="2019-12-29T10:45:23.000Z">
<meta property="article:modified_time" content="2020-03-03T13:07:34.663Z">
<meta property="article:author" content="未名Hugh">
<meta property="article:tag" content="SpringBoot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E5%AF%BC%E8%88%AA%E8%8C%83%E4%BE%8B.png">

<link rel="canonical" href="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>SpringBoot 学习 | 未名的奇妙旅程</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

  
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">未名的奇妙旅程</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">未名的技术博客，记录学习点滴</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://hughzc.github.io/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="未名Hugh">
      <meta itemprop="description" content="技术博客，Java，Spring Boot，并发编程，网络编程">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="未名的奇妙旅程">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SpringBoot 学习
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-12-29 18:45:23" itemprop="dateCreated datePublished" datetime="2019-12-29T18:45:23+08:00">2019-12-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-03 21:07:34" itemprop="dateModified" datetime="2020-03-03T21:07:34+08:00">2020-03-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="SpringBoot学习"><a href="#SpringBoot学习" class="headerlink" title="SpringBoot学习"></a>SpringBoot学习</h1><h2 id="涉及的一些知识点"><a href="#涉及的一些知识点" class="headerlink" title="涉及的一些知识点"></a>涉及的一些知识点</h2><ul>
<li>SpringBoot</li>
<li>Spring MVC</li>
<li>MyBatis</li>
<li>MySQL、H2</li>
<li>Flyway</li>
<li>Heroku</li>
<li>Git/Github</li>
<li>Maven</li>
<li>Restful<a id="more"></a>
<h2 id="项目创建"><a href="#项目创建" class="headerlink" title="项目创建"></a>项目创建</h2></li>
</ul>
<p>​    选择Spring，进行创建</p>
<h3 id="初始创建文件夹"><a href="#初始创建文件夹" class="headerlink" title="初始创建文件夹"></a>初始创建文件夹</h3><p>​    src.main文件中包括java文件夹（存放<strong>Java</strong>文件）和resources（存放<strong>静态</strong>文件，<strong>Web</strong>or<strong>模板</strong>文件和<strong>配置</strong>文件）。</p>
<p>​    java文件夹下的application作用是可以作为SpringBoot项目启动的窗口。</p>
<h3 id="网址构成"><a href="#网址构成" class="headerlink" title="网址构成"></a>网址构成</h3><p><a href="https://www.bilibili.com/video" target="_blank" rel="noopener">https://www.bilibili.com/video</a></p>
<p>​    对应的是https或者http+域名+路径</p>
<ul>
<li><p>绑定本机的地址是localhost/120.0.0.1  (可以通过此地址访问本机项目承载地址)</p>
</li>
<li><p>路径是一个path，因此网络地址对应到本机可以是localhost/120.0.0.1/video</p>
</li>
<li><p>最终对应的是<a href="http://localhost:8887/hello" target="_blank" rel="noopener">http://localhost:8887/hello</a>  (Tomcat默认的端口号是<strong>8080</strong>)</p>
</li>
</ul>
<h3 id="正式编程"><a href="#正式编程" class="headerlink" title="正式编程"></a>正式编程</h3><h4 id="实现输入网址返回可视化界面"><a href="#实现输入网址返回可视化界面" class="headerlink" title="实现输入网址返回可视化界面"></a>实现输入网址返回可视化界面</h4><h5 id="文档说明"><a href="#文档说明" class="headerlink" title="文档说明"></a>文档说明</h5><ol>
<li><p>使用<a href="https://spring.io/guides" target="_blank" rel="noopener">Spring官方文档</a>下的<a href="https://spring.io/guides/gs/serving-web-content/" target="_blank" rel="noopener">Serving Web Content with Spring MVC</a>，找到其依赖的dependency</p>
<p>，复制进项目的<strong>pom.xml</strong>进行maven配置，导入相应的包。</p>
</li>
<li><p>创建Controller包，在其中新建一个Controller名称的类，整体标注上@Controller注解。</p>
<p>在Spring建立网站的方法中，<strong>HTTP的请求由Controller处理</strong>，通过@Controller注解来识别控制器。GreetingController通过返回View的名称（在此处为greeting）来<strong>处理GET请求</strong>/ greeting。 View负责呈现HTML内容。</p>
<p>@GetMapping注解确保将对/ greeting的HTTP <strong>GET请求</strong>映射到greeting（）方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GreetingController</span> </span>&#123;</span><br><span class="line">	<span class="meta">@GetMapping</span>(<span class="string">"/greeting"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">greeting</span><span class="params">(@RequestParam(name=<span class="string">"name"</span>, required=<span class="keyword">false</span>, defaultValue=<span class="string">"World"</span>)</span> String name, Model model) </span>&#123;</span><br><span class="line">		model.addAttribute(<span class="string">"name"</span>, name);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"greeting"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>@Controller，将当前类作为路由API的一个承载者</p>
<p>@GetMapping，确保对其中内容的HTTP GET请求映射到greeting方法</p>
</blockquote>
<p>作用是以网址形式向服务端传送key-value信息。</p>
<ul>
<li>name=hughzc</li>
</ul>
<p>也可以进行接收，如name=“name”，前面定义变量，后面用来接收值。<strong>GetMapping</strong>方法可以获得从浏览器接收的参数。然后使用<strong>model</strong>来显示信息，类似map，将信息向前端传递。key是”“name”，value是前端传过来的name，接收到并set到model中。返回greeting。</p>
<blockquote>
<p>体现的编程思路：仔细阅读文档。</p>
</blockquote>
<p>​    因为返回greeting，因此定义的文件名为greeting，具体为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src&#x2F;main&#x2F;resources&#x2F;templates&#x2F;greeting.html</span><br></pre></td></tr></table></figure>

<p>里面的内容为：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Getting Started: Serving Web Content<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">"'Hello, ' + $&#123;name&#125; + '!'"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>head跟body就是比较基础的html语言，不一样的是加入了标签，告知spring使用模板引擎去解析。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>要做的是</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">"'Hello, ' + $&#123;name&#125; + '!'"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>spring动态语言，将 model中的key为name的信息替换掉，p标签中的内容是Hello，+输入内容。</p>
</li>
<li><p>让当前的程序可执行</p>
<p>目前可以直接调用main函数，后续会导成jar包。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar build&#x2F;libs&#x2F;gs-serving-web-content-0.1.0.jar</span><br></pre></td></tr></table></figure>

<p>利用maven打成jar包，放到服务器，在服务器上直接运行上述命令即可。</p>
</li>
</ol>
<h5 id="实际操作"><a href="#实际操作" class="headerlink" title="实际操作"></a>实际操作</h5><p>​    SpringBoot特点是所有带有注解的文件，只要在当前application的同一级或下一级目录，就会自动加载进来。</p>
<ol>
<li><p>并列application的同一级创建一个package为<strong>controller</strong></p>
<ul>
<li><p>新建类，写注解@Controller，识别此类作为spring的bean管理，同时为一个controller（允许此类接收前端的请求）。新建一个返回值为String的hello方法，加上注解@GetMapping(“/hello”)。hello方法接收参数为@RequestParam，请求的是name，定义name跟model。</p>
<p>将浏览器中传入的值放入model中，</p>
<p>输出hello，此时会自动去resources.templates下去找模板。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">(@RequestParam(name = <span class="string">"name"</span>)</span> String name, Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">"name"</span>,name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在templates下新建<strong>html</strong>文件<strong>hello</strong>(与contrller中返回类型同名)，代码为</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Getting Started: Serving Web Content<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">"'Hello, ' + $&#123;name&#125; + '!'"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>启动SpringBoot，输入<a href="http://localhost:8080/hello?name=hughzc，返回结果。hello名为html文件名。8080为默认端口。" target="_blank" rel="noopener">http://localhost:8080/hello?name=hughzc，返回结果。hello名为html文件名。8080为默认端口。</a></p>
<blockquote>
<p>Hello, hughzc!</p>
</blockquote>
</li>
<li><p>修改端口号，在<strong>配置</strong>文件(resources.application.properties)中进行修改，点击重新启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.port&#x3D;8887</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ol>
<p>过程梳理：</p>
<ol>
<li>在浏览器输入网址<code>http://localhost:Port/hello?name=name值</code></li>
<li>HTTP的GET请求由controller处理，GetMappint(“/hello”)到对应的hello方法中，传入的name进行接收，返回String类型的hello</li>
<li>在templates下寻找hello.index，进行前端页面显示，将name进行替换</li>
</ol>
<h2 id="将代码放至Github托管"><a href="#将代码放至Github托管" class="headerlink" title="将代码放至Github托管"></a>将代码放至Github托管</h2><h3 id="简单流程"><a href="#简单流程" class="headerlink" title="简单流程"></a>简单流程</h3><ol>
<li><p>添加SSH keys，设置当前仓库的权限</p>
</li>
<li><p>在Github新建仓库</p>
</li>
<li><p>git init新建仓库</p>
</li>
<li><p>git add, commit 代码</p>
</li>
<li><p>修改git文件，加入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[user]</span><br><span class="line">	name = </span><br><span class="line">	email = @<span class="number">163</span>.com</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果这时候有新的commit，可以使用代码，进行commit的追加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend  --no-edit</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用git push，将本地文件更新至仓库</p>
</li>
</ol>
<h2 id="明确需求"><a href="#明确需求" class="headerlink" title="明确需求"></a>明确需求</h2><h3 id="目标效果"><a href="#目标效果" class="headerlink" title="目标效果"></a>目标效果</h3><p><a href="https://elasticsearch.cn/" target="_blank" rel="noopener">elastic社区</a></p>
<ul>
<li>最上面为导航，功能分类，搜索功能， 登录</li>
<li>下面为一系列Tag</li>
<li>再下面为主要板块，topic列表，包括评论数，时间，人等元素</li>
<li>右边为热门元素</li>
</ul>
<h2 id="Bootstrap"><a href="#Bootstrap" class="headerlink" title="Bootstrap"></a>Bootstrap</h2><h3 id="基本认识"><a href="#基本认识" class="headerlink" title="基本认识"></a>基本认识</h3><p>​    <a href="https://v3.bootcss.com/getting-started/#download" target="_blank" rel="noopener">官方网站</a>，Bootstrap为前端UI框架，可以快速搭建出一个前端页面，在<strong>组件</strong>中可以浏览所需要的功能，前端组件轮子集合，可以极大减小开发量。</p>
<p>​    可以做到响应式布局，使用到了<a href="https://v3.bootcss.com/css/#grid" target="_blank" rel="noopener">栅格系统</a>，通过media设置尺寸，在不同屏幕尺寸下做不同的CSS样式。将整个浏览器分为12份，通过前缀后的数字组合实现快速布局。</p>
<h3 id="Bootstrap编写导航栏样式"><a href="#Bootstrap编写导航栏样式" class="headerlink" title="Bootstrap编写导航栏样式"></a>Bootstrap编写导航栏样式</h3><ul>
<li><p>下载Bootstrap</p>
</li>
<li><p>复制进src/main/resources/static(放资源文件)</p>
</li>
<li><p>更改resources/templates/hello.html为index.html</p>
<ul>
<li>修改社区名称<titile></titile></li>
<li>删除body中内容</li>
</ul>
</li>
<li><p>引入bootstrap，样式和js文件</p>
<p>可直接将所需要的文件拖入，自动加入其路径</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/bootstrap.min.css"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/bootstrap-theme.min.css"</span> /&gt;</span></span><br><span class="line">&lt;script src="../static/js/bootstrap.min.js" type="application/javascript" &lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>拷贝需要的组件代码至body中</p>
<ul>
<li><p>导航条</p>
<p>修改名字，删去不需要的内容</p>
<p>初始样式效果</p>
<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E5%AF%BC%E8%88%AA%E8%8C%83%E4%BE%8B.png" class title="初始结果">

<p>理想修改效果</p>
<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E7%90%86%E6%83%B3%E7%A4%BE%E5%8C%BA%E5%AF%BC%E8%88%AA.png" class title="理想结果">
</li>
</ul>
</li>
<li><p>创建indexController</p>
<ul>
<li>给注解Contrller</li>
<li>匹配路径为根目录，即(“/”)，什么都不输入默认访问此路径</li>
<li>返回index模板</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">indexController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span></span>&#123; <span class="keyword">return</span> <span class="string">"index"</span>;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实际修改效果</p>
<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E5%AE%9E%E9%99%85%E6%95%88%E6%9E%9C.png" class title="实际结果">

</li>
</ul>
<h2 id="利用Github-App实现登录"><a href="#利用Github-App实现登录" class="headerlink" title="利用Github App实现登录"></a>利用Github App实现登录</h2><p>​    实现登录功能，接入Github。查看API文档，找到<a href="https://developer.github.com/apps/" target="_blank" rel="noopener">OAuth Apps</a>，依据提示进行操作。</p>
<h3 id="创建APP"><a href="#创建APP" class="headerlink" title="创建APP"></a>创建APP</h3><p>​    <a href="https://developer.github.com/apps/building-oauth-apps/creating-an-oauth-app/" target="_blank" rel="noopener">依据网站提示</a>，在Github设置中进行创建</p>
<ol>
<li><p>填写APP名称</p>
</li>
<li><p>主页URL</p>
</li>
<li><p><a href="https://developer.github.com/apps/building-oauth-apps/authorizing-oauth-apps/" target="_blank" rel="noopener">callback URL</a></p>
<ul>
<li>用户被重定向以请求他们的GitHub身份</li>
<li>用户通过GitHub被重定向回您的站点</li>
<li>您的应用程序使用用户的访问令牌访问API</li>
</ul>
<p>需要拿到一些用户数据，正常来说直接在主页URL后加入callback，但是为了本地调试方便，地址为</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http://localhost:8887/callback</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Github登录流程"><a href="#Github登录流程" class="headerlink" title="Github登录流程"></a>Github登录流程</h3><p>​    使用<a href="https://www.visual-paradigm.com" target="_blank" rel="noopener">Visual Paradig</a>利用时序图梳理登录流程。</p>
<ol>
<li><p>创建项目</p>
</li>
<li><p>创建diagram，选择Sequence diagram，表示对象和对象通过时间传递传递消息的路线。</p>
<p>用户向个人社区发出访问，社区进行登录。</p>
<ul>
<li>给Github发出认证，Github认证后回调 redirect_uri并携带code</li>
<li>用户持access_token 携带code，若匹配，Github返回access_token </li>
<li>站点发送user 携带access_token给Github，Github返回user信息</li>
<li>站点将user信息存入数据库，更新给用户登录状态</li>
<li>用户显示登录成功</li>
</ul>
</li>
</ol>
<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/github%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B.png" class title="登录流程">

<h4 id="调用authorize"><a href="#调用authorize" class="headerlink" title="调用authorize"></a>调用authorize</h4><p>​    将登录按钮绑定地址，点击登录时可以跳转到指定地址并携带写入参数。将地址href写成<a href="https://developer.github.com/apps/building-oauth-apps/authorizing-oauth-apps/" target="_blank" rel="noopener">参考文档</a>中所给。</p>
<blockquote>
<p>URL中有多个参数时，第一个参数用<strong>?</strong>区分，之后的参数用<strong>&amp;</strong>区分</p>
</blockquote>
<p>​    在index.html中找到登录，传入必要参数(clien_id，redirect_uri，scope，state)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://github.com/login/oauth/authorize?client_id=github上给的&amp;redirect_uri=http://localhost:8887/callback&amp;scope=user&amp;state=1"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​    这时候点击登录并授权后，网站会返回<code>code</code>信息，后面将<code>code</code>信息提取出来</p>
<h4 id="获取code"><a href="#获取code" class="headerlink" title="获取code"></a>获取code</h4><ol>
<li><p>写新的Controller</p>
<p>返回String类型的<code>callback()</code>，返回index主页，在calback中寻找，写<code>GetMapping</code>注解，需要传入参数，为用户写入的String类型的code和state。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">authorizeController</span> </span>&#123;</span><br><span class="line">    <span class="comment">//指向返回文件</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/callback"</span>)</span><br><span class="line">    <span class="comment">//使用name接收code，为String类型</span></span><br><span class="line">    <span class="comment">//使用name接收state，为String类型</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">callback</span><span class="params">(@RequestParam(name = <span class="string">"code"</span>)</span> String code,</span></span><br><span class="line"><span class="function">                           @<span class="title">RequestParam</span><span class="params">(name = <span class="string">"state"</span>)</span> String state)</span>&#123;</span><br><span class="line">        <span class="comment">//登录成功后返回index页面</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>模拟post请求</p>
<p>使用<a href="https://square.github.io/okhttp/" target="_blank" rel="noopener">OkHttp</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> MediaType JSON</span><br><span class="line">    = MediaType.get(<span class="string">"application/json; charset=utf-8"</span>);</span><br><span class="line">OkHttpClient client = <span class="keyword">new</span> OkHttpClient();</span><br><span class="line"><span class="function">String <span class="title">post</span><span class="params">(String url, String json)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">  RequestBody body = RequestBody.create(json, JSON);</span><br><span class="line">  Request request = <span class="keyword">new</span> Request.Builder()</span><br><span class="line">      .url(url)</span><br><span class="line">      .post(body)</span><br><span class="line">      .build();</span><br><span class="line">  <span class="keyword">try</span> (Response response = client.newCall(request).execute()) &#123;</span><br><span class="line">    <span class="keyword">return</span> response.body().string();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>​    新建一个包provider，提供对第三方信息的支持能力，新建类<code>GithubProvider</code></p>
<blockquote>
<p>体现思想：不同业务间进行隔离</p>
</blockquote>
<p>​    写注解<code>@Component</code></p>
<blockquote>
<p>@Component 仅仅把当前类初始化Spring容器的上下文，这样调用时不用实例化对象，IOC，便于去调用对象</p>
</blockquote>
<p>​    查看文档，在使用Post请求时，有5个参数，当编程参数超过2个，不要使用形参传入，而是封装成对象。</p>
<p>​    新建一个包dto，即数据传输模型，新建类AccessTokenDTO，里面有需要传输的5个参数，快捷键alt+insert快速创建其getter和setter方法。</p>
<p>​    类GithubProvider中编写方法getAccessToken，接收AccessTokenDTO类型的数据。在此方法中拷贝OkHttp中的方法，引入jar包。</p>
<p>​    在Maven中添加依赖，找到pom.xml，将依赖代码复制进依赖中。</p>
<blockquote>
<p><a href="https://mvnrepository.com/" target="_blank" rel="noopener">Maven包查询</a></p>
</blockquote>
<p>将不必要的修饰删除，如public static final修饰。</p>
<ul>
<li>json就是自定义接收变量的access_token类变量，为了将access_token转化为json，需要jar包，使用<a href="https://mvnrepository.com/artifact/com.alibaba/fastjson" target="_blank" rel="noopener">fastjson</a>，将其依赖复制进pom.xml。方法中需要json，使用JSON.toJSONString(accessTokenDTO)，自动将accessToken转化成String类型的JSON。</li>
<li>url更改成<a href="https://developer.github.com/apps/building-oauth-apps/authorizing-oauth-apps/" target="_blank" rel="noopener">参考文档</a>中给出的POST地址</li>
<li>处理IO异常</li>
<li>最后返回null，如果取到了返回body。因为怀疑此body不是我们所需要的，因此可以先将其打印</li>
</ul>
<blockquote>
<p>遇到不知道是否正确的变量，可以打印进行调试</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getAccessToken</span><span class="params">(AccessTokenDTO accessTokenDTO)</span></span>&#123;</span><br><span class="line">    MediaType mediaType = MediaType.get(<span class="string">"application/json; charset=utf-8"</span>);</span><br><span class="line"></span><br><span class="line">    OkHttpClient client = <span class="keyword">new</span> OkHttpClient();</span><br><span class="line"></span><br><span class="line">    RequestBody body = RequestBody.create(JSON.toJSONString(accessTokenDTO), mediaType);</span><br><span class="line">    Request request = <span class="keyword">new</span> Request.Builder()</span><br><span class="line">            .url(<span class="string">"https://github.com/login/oauth/access_token"</span>)</span><br><span class="line">            .post(body)</span><br><span class="line">            .build();</span><br><span class="line">    <span class="keyword">try</span> (Response response = client.newCall(request).execute()) &#123;</span><br><span class="line">        String string = response.body().string();</span><br><span class="line">        System.out.println(string);</span><br><span class="line">        <span class="keyword">return</span> string;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    GithubProvider的getAccessToken已经封装好，在controller/AuthorizeController中进行调用。通过@Component注解 ，已经将GithubProvider放到了Spring的容器中，利用@Autowired注解将Spring容器中的写好的实例化的实例加载到当前使用的上下文。通过注解加定义实例将实例化好的放入，使用方便。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> GithubProvider githubProvider;</span><br></pre></td></tr></table></figure>

<p>​    在AuthorizeController的calback方法中，将需要的5个参数封装进AccessToken，调用githubProvider的getAccessToken方法实现post请求。</p>
<p>​    这时候启动项目，在localhost:8887页面点击登录，没有报错，而且在控制台打印了所需要的access_token。</p>
<blockquote>
<p>疑问，在AccessController中的mapping “callback”没有自己写，是Spring封装好的吗？</p>
<p>之前url有一个是callback的，应该是之前的那个</p>
</blockquote>
<p>​    即返回如下所示的字符串。这样通过access_token的api获取到了access_token。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">access_token=e72e16c7e42f292c6912e7710c838347ae178b4a&amp;token_type=bearer</span><br></pre></td></tr></table></figure>

<p>​    要获取到access_token，先用&amp;拆分，然后用=拆分。对应的更改代码为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String string = response.body().string();</span><br><span class="line">String token = string.split(<span class="string">"&amp;"</span>)[<span class="number">0</span>].split(<span class="string">"="</span>)[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">return</span> token;</span><br></pre></td></tr></table></figure>

<h4 id="获取用户信息"><a href="#获取用户信息" class="headerlink" title="获取用户信息"></a>获取用户信息</h4><p>官方文档第三步</p>
<blockquote>
<p>The access token allows you to make requests to the API on a behalf of a user.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Authorization: token OAUTH-TOKEN</span><br><span class="line">GET https:&#x2F;&#x2F;api.github.com&#x2F;user</span><br></pre></td></tr></table></figure>

<p>For example, in curl you can set the Authorization header like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H &quot;Authorization: token OAUTH-TOKEN&quot; https:&#x2F;&#x2F;api.github.com&#x2F;user</span><br></pre></td></tr></table></figure>
</blockquote>
<p>​    在<a href="https://github.com/settings/tokens/new" target="_blank" rel="noopener">github界面</a>创建新的personal access token，拿到user信息，用来测试。复制token用于验证是否是调用API就可以拿回数据。</p>
<p>​    验证方法，使用文档中给定的GET网址，加上github创建的access_token，ctrl+shift+n，在无痕网址界面进行验证，确实可以得到用户个人信息。测试完毕，删除此access_token。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.github.com/user?access_token=自己的access_token</span><br></pre></td></tr></table></figure>

<p>​    在GithubProvider中再写方法，通过access_token获取到用户信息。需要的参数是id，name，bio。</p>
<p>​    在dto中创建对象GithubUser。有三个属性，String的name和bio,long类型的id以避免越界。GithubUser是GithubProvider的一个返回值。使用<a href="https://square.github.io/okhttp/" target="_blank" rel="noopener">okhttp</a>的get方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">OkHttpClient client = <span class="keyword">new</span> OkHttpClient();</span><br><span class="line"></span><br><span class="line"><span class="function">String <span class="title">run</span><span class="params">(String url)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">  Request request = <span class="keyword">new</span> Request.Builder()</span><br><span class="line">      .url(url)</span><br><span class="line">      .build();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> (Response response = client.newCall(request).execute()) &#123;</span><br><span class="line">    <span class="keyword">return</span> response.body().string();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    url为测试所用的url，但accesstoken不同。</p>
<p>​    浏览器返回的是json的格式，拿到获取的response的string，使用<strong>JSON.parseObject(string)</strong>，将<strong>string</strong>自动转化为java类对象。这样将String的json对象去自动解析转换成java的类对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> GithubUser <span class="title">getUser</span><span class="params">(String accessToken)</span></span>&#123;</span><br><span class="line">    OkHttpClient client = <span class="keyword">new</span> OkHttpClient();</span><br><span class="line">    Request request = <span class="keyword">new</span> Request.Builder()</span><br><span class="line">            .url(<span class="string">"https://api.github.com/user?access_token="</span>+accessToken)</span><br><span class="line">            .build();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Response response = client.newCall(request).execute();</span><br><span class="line">        String string = response.body().string();</span><br><span class="line">        GithubUser githubUser = JSON.parseObject(string,GithubUser<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="keyword">return</span> githubUser;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    在AuthorizeController中调用GithubProvider.getUser(accessToken)，将user进行打印，看是否是所需要的。通过github的user的api携带access_token获取到了用户信息。</p>
<blockquote>
<p>出现错误，在点击登录的时候并灭有出现理想的user姓名，而是空，先检查了access_token，发现是正确的，则说明是getUser()方法出现了问题，进行检查后发现是url里面少写了一个“=”。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuthorizeController</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Autowired与Component，调用GithubProdiver</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> GithubProvider githubProvider;</span><br><span class="line">    <span class="comment">//指向返回文件</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/callback"</span>)</span><br><span class="line">    <span class="comment">//使用name接收code，为String类型</span></span><br><span class="line">    <span class="comment">//使用name接收state，为String类型</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">callback</span><span class="params">(@RequestParam(name = <span class="string">"code"</span>)</span> String code,</span></span><br><span class="line"><span class="function">                           @<span class="title">RequestParam</span><span class="params">(name = <span class="string">"state"</span>)</span> String state)</span>&#123;</span><br><span class="line">        AccessTokenDTO accessTokenDTO = <span class="keyword">new</span> AccessTokenDTO();</span><br><span class="line">        accessTokenDTO.setClient_id(<span class="string">"网站给定"</span>);</span><br><span class="line">        accessTokenDTO.setClient_secret(<span class="string">"网站给定"</span>);</span><br><span class="line">        accessTokenDTO.setCode(code);</span><br><span class="line">        accessTokenDTO.setState(state);</span><br><span class="line">        accessTokenDTO.setRedirect_uri(<span class="string">"http://localhost:8887/callback"</span>);</span><br><span class="line">        String accessToken = githubProvider.getAccessToken(accessTokenDTO);</span><br><span class="line">        GithubUser user = githubProvider.getUser(accessToken);</span><br><span class="line">        System.out.println(user.getName());</span><br><span class="line">        <span class="comment">//登录成功后返回index页面</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="配置文件的分离application-proerties"><a href="#配置文件的分离application-proerties" class="headerlink" title="配置文件的分离application.proerties"></a>配置文件的分离application.proerties</h2><blockquote>
<p>体现的思路：要用到的时候在进行设计，不要过度设计</p>
</blockquote>
<p>​    之前将各种信息都写在了代码中，在线上部署的时候，地址这些需要手动修改，比较麻烦，要做到不同的环境去读取配置文件，将需要的信息写上不同的内容。写在application.proerties中。需要的有Client_id，Client_secret和Redirect_uri。</p>
<blockquote>
<p>server.port = 8887，含义是server下面的port值是8887</p>
</blockquote>
<p>​    修改配置文件为</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">github.client.id</span> = <span class="string">给定的</span></span><br><span class="line"><span class="meta">github.client.secret</span> = <span class="string">给定的</span></span><br><span class="line"><span class="meta">github.redirect.uri</span> = <span class="string">http://localhost:8887/callback</span></span><br></pre></td></tr></table></figure>

<p>​    通过value注解来使用</p>
<blockquote>
<p>@Value(“${string}”)，在配置文件中读取key为string的value</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value</span>(<span class="string">"$&#123;github.client.id&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> String clientId;</span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"$&#123;github.client.secret&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> String clientSecret;</span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"$&#123;github.redirect.uri&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> String redirectUri;</span><br></pre></td></tr></table></figure>

<p>​    然后可以通过变量名直接使用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">accessTokenDTO.setClient_id(clientId);</span><br><span class="line">accessTokenDTO.setClient_secret(clientSecret);</span><br><span class="line">   accessTokenDTO.setRedirect_uri(redirectUri);</span><br></pre></td></tr></table></figure>

<h2 id="Session和Cookies原理和实现"><a href="#Session和Cookies原理和实现" class="headerlink" title="Session和Cookies原理和实现"></a>Session和Cookies原理和实现</h2><p>​    Session的简单理解是在银行开户，银行中存有你的账户信息。Cookies是银行卡，去银行取钱需要银行卡。在网页的application下可以看到cookie</p>
<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/cookies.png" class title="This is an example image">

<p>​    看到有多张银行卡</p>
<ul>
<li>domain代表银行，cookie不能跨域，每条记录都有个域名，路径和过期时间，如15天可用这种。</li>
<li>name相当于卡号</li>
<li>value相当于卡号对应的唯一标识</li>
</ul>
<p>​      可在network中看向服务端请求的信息。Request中有cookie信息，服务端通过cookie找到session，返回，渲染到页面。</p>
<p>​      要做到的效果是，没有登录的时候，有登录和我，登录成功后，我变成登陆者的名字，去掉登录。 </p>
<p>​     在AuthorizeController下有callback，在user不为空的时候，可以证明登录成功。</p>
<p>​    session在httprequest中拿到，将user对象放入session，此时框架集成了功能，使得前端有了指定的cookie。重新返回到index主页。使用redirect会将地址那些去掉，重定向到指定界面。这时候就写到了cookie，还需要在页面展示。</p>
<p>​    在前端界面进行修改，如果有session，则展示我。</p>
<blockquote>
<p>不知道如何实现，则直接baidu，用关键词搜索，不要用自己的上下文语义</p>
</blockquote>
<p>​    在callback()方法中增加参数 <strong>HttpServletRequest request</strong>，在接收到user后写上判断语句</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(user != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//登录成功，写cookie和session</span></span><br><span class="line">            <span class="comment">//将user对象放入session，框架集成，前端有了银行卡</span></span><br><span class="line">            request.getSession().setAttribute(<span class="string">"user"</span>,user);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"redirect:index"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//登录失败，重新登陆</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">"redirect:index"</span>;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>​    在前端页面修改逻辑，如果session.user不为空，显示我；如果为空，显示登录</p>
<blockquote>
<p>在改动大的时候，注意看控制台，会有提示信息</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"dropdown"</span> <span class="attr">th:if</span>=<span class="string">"$&#123;session.user != null&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"dropdown-toggle"</span> <span class="attr">data-toggle</span>=<span class="string">"dropdown"</span> <span class="attr">role</span>=<span class="string">"button"</span> <span class="attr">aria-haspopup</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">aria-expanded</span>=<span class="string">"false"</span>&gt;</span>我 <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"caret"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"dropdown-menu"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>消息中心<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>个人资料<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>退出登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">th:unless</span>=<span class="string">"$&#123;session.user == null&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://github.com/login/oauth/authorize?client_id=eb92e00b211c84362136&amp;redirect_uri=http://localhost:8887/callback&amp;scope=user&amp;state=1"</span>&gt;</span></span><br><span class="line">    登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​    但是没有登录也没有我，修改语法。将unless语法修改为</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">th:unless</span>=<span class="string">"not $&#123;session.user != null&#125;"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://github.com/login/oauth/authorize?client_id=eb92e00b211c84362136&amp;redirect_uri=http://localhost:8887/callback&amp;scope=user&amp;state=1"</span>&gt;</span></span><br><span class="line">     登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​    还是不行，进行调试，因为还没有点击登录，因此session为空。在页面中打印user,在GithubUser类中，重写其toString()方法。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">"$&#123;session.user&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​    在网页的检查，element中找到代码对应相应位置，可以看到没有值。</p>
<p>​    重新修改语法，两个都使用if。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">th:if</span>=<span class="string">"$&#123;session.user == null&#125;"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://github.com/login/oauth/authorize?client_id=eb92e00b211c84362136&amp;redirect_uri=http://localhost:8887/callback&amp;scope=user&amp;state=1"</span>&gt;</span></span><br><span class="line">     登录<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​    然后可以进行提交，但没有重定向到主页，说明重定向语法写错，修改为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="string">"redirect:/"</span>;</span><br></pre></td></tr></table></figure>

<p>​    这时候登录后变成我，而且刷新也不变化，说明已经将登录态记住了。这时候查看Application，出现了cookies。默认写了一个key，发送请求时，将name和value拼到cookie请求头中，发到服务端，通过cookie的key去找requst的session</p>
<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E9%BB%98%E8%AE%A4cookie.png" class title="This is an example image">

<p>​    然后将显示的我修改成个人名称，在index中将我去掉，添加<strong>th:text=”${session.user.getName()}</strong>变成如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"dropdown-toggle"</span> <span class="attr">data-toggle</span>=<span class="string">"dropdown"</span> <span class="attr">role</span>=<span class="string">"button"</span> <span class="attr">aria-haspopup</span>=<span class="string">"true"</span> <span class="attr">aria-expanded</span>=<span class="string">"false"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;session.user.getName()&#125;"</span> &gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"caret"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​    但是每次重启服务器，用户都需要重新登录，如何解决？将登录信息持久化到数据库。</p>
<h2 id="MySQL基本概念及语法"><a href="#MySQL基本概念及语法" class="headerlink" title="MySQL基本概念及语法"></a>MySQL基本概念及语法</h2><p>​    MySQL是一个DataBase(数据库)，在数据库下有Table(表)，用表来承载数据，表下面是记录Record，之间为组合关系。没有一者，另一者也不存在。</p>
<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E4%B8%89%E5%B1%82%E6%A8%A1%E5%9E%8B.png" class title="This is an example image">

<p>​    <a href="https://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener">MySQL菜鸟教程资料</a>。</p>
<ul>
<li><p>创建数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> 数据库名;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建数据表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> table_name (column_name column_type);</span><br></pre></td></tr></table></figure>

<p>在 RUNOOB 数据库中创建数据表runoob_tbl：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">`runoob_tbl`</span>(</span><br><span class="line">   <span class="string">`runoob_id`</span> <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> AUTO_INCREMENT,</span><br><span class="line">   <span class="string">`runoob_title`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   <span class="string">`runoob_author`</span> <span class="built_in">VARCHAR</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   <span class="string">`submission_date`</span> <span class="built_in">DATE</span>,</span><br><span class="line">   PRIMARY <span class="keyword">KEY</span> ( <span class="string">`runoob_id`</span> )</span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure>

<p> 具体含义为：如果存在就删除，不存在就创建表，具体有int类型的id（逐渐自动增长），String类型的title，author，工具栏日Date类型的date。PRIMARY KEY表示每个表有自己的主键。</p>
</li>
<li><p>插入数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name ( field1, field2,...fieldN )</span><br><span class="line">                       <span class="keyword">VALUES</span></span><br><span class="line">                       ( value1, value2,...valueN );</span><br></pre></td></tr></table></figure>

<p>具体例子为</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO runoob_tbl </span><br><span class="line">    -&gt; (runoob_title, runoob_author, submission_date)</span><br><span class="line">    -&gt; VALUES</span><br><span class="line">    -&gt; ("学习 PHP", "菜鸟教程", NOW());</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name,column_name</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line">[<span class="keyword">WHERE</span> Clause]</span><br><span class="line">[<span class="keyword">LIMIT</span> N][ <span class="keyword">OFFSET</span> M]</span><br></pre></td></tr></table></figure>

<p>含义为查询…，从….中，在…条件下，限制N个，从M开始。通过分页从数据库中拿出数据。</p>
<p>具体例子为</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> runoob_tbl;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Update更新</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> table_name <span class="keyword">SET</span> field1=<span class="keyword">new</span>-value1, field2=<span class="keyword">new</span>-value2</span><br><span class="line">[<span class="keyword">WHERE</span> Clause]</span><br></pre></td></tr></table></figure>

<p>具体例子为</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> runoob_tbl <span class="keyword">SET</span> runoob_title=<span class="string">'学习 C++'</span> <span class="keyword">WHERE</span> runoob_id=<span class="number">3</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>delete删除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> table_name [<span class="keyword">WHERE</span> Clause]</span><br></pre></td></tr></table></figure>

<p>具体例子为</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ELETE FROM runoob_tbl WHERE runoob_id=3;</span><br></pre></td></tr></table></figure>

<p>删除id=3时的数据。</p>
</li>
</ul>
<h2 id="H2数据库"><a href="#H2数据库" class="headerlink" title="H2数据库"></a>H2数据库</h2><p> <a href="http://h2database.com/html/main.html" target="_blank" rel="noopener">H2数据库</a>是一个快速的内置数据库，通过浏览器或控制台直接仿问，在pom中添加其依赖，在IDEA中的Database添加H2数据库，使用embedded连接方式，路径选择为：在根目录下，以项目命名。</p>
<blockquote>
<p>在WIN10下，选择Data Source From Path，更好用</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbc:h2:C:&#x2F;Code&#x2F;mycommunity</span><br></pre></td></tr></table></figure>

<ul>
<li>创建一个table user，增加一个column，name为id，自动增长，主键</li>
<li>增加一个account_id，类型为VARCHAR(100)，即长度为100个字符的字符串</li>
<li>增加name，类型为VARCHAR(50)</li>
<li>自己设置value，登录成功后，手动设置到Cookie中，当传递过来时，拿值在数据库中查找，命名为token，类型为char(36)</li>
<li>数据库的信息有两个时间，创建时间和修改时间，用于去排查问题，gmt为格林尼标准时间<ul>
<li>增加gmt_create，类型为BIGINT，相当于Long</li>
<li>增加gmt_modified，类型为BIGINT</li>
</ul>
</li>
</ul>
<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/H2%E5%88%9B%E5%BB%BA.png" class title="This is an example image">

<p>对应到具体的代码为</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span></span><br><span class="line">(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span> auto_increment,</span><br><span class="line">	account_id <span class="built_in">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">	<span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">	token <span class="built_in">char</span>(<span class="number">36</span>),</span><br><span class="line">	gmt_create <span class="built_in">BIGINT</span>,</span><br><span class="line">    gmt_modified <span class="built_in">BIGINT</span>,</span><br><span class="line">	<span class="keyword">constraint</span> user_pk</span><br><span class="line">		primary <span class="keyword">key</span> (<span class="keyword">id</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="集成MyBatis并实现插入操作"><a href="#集成MyBatis并实现插入操作" class="headerlink" title="集成MyBatis并实现插入操作"></a>集成MyBatis并实现插入操作</h2><blockquote>
<p>快速实现的思想：baidu搜索关键词然后在官网上看一手资料</p>
</blockquote>
<p> MyBatis 是支持普通 SQL查询，存储过程和高级映射的优秀持久层框架。找到<a href="http://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/" target="_blank" rel="noopener">MyBatis官方资料</a>，按照步骤操作，查阅<a href="https://docs.spring.io/spring-boot/docs/2.0.0.RC1/reference/htmlsingle/#boot-features-embedded-database-support" target="_blank" rel="noopener">Spring文档</a>。</p>
<ul>
<li><p>添加依赖</p>
</li>
<li><p>需要DataSource，在Spring中定义连接池，在application.properties中添加配置文件</p>
<ul>
<li><p>添加spring-boot-starter-jdbc依赖</p>
</li>
<li><p>在配置文件中添加</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.url=jdbc:h2:C:/Code/mycommunity</span><br><span class="line">spring.datasource.username=sa</span><br><span class="line">spring.datasource.password=123</span><br><span class="line">spring.datasource.driver-class-name=org.h2.Driver</span><br></pre></td></tr></table></figure>

<p>org.h2.Driver报错，查询后将h2的Maven依赖的test标签去掉即可。</p>
</li>
</ul>
</li>
<li><p>提供Mapper</p>
<p>新建包mapper，新建类UserMapper。</p>
<ul>
<li><p>写Mapper注解，添加insert接口，传入User类型的数据，alt+回车导入自己写的数据库model的User类</p>
</li>
<li><p>新建类model，用于数据库传数据，新建类User，含有设置数据库的6种变量</p>
</li>
<li><p>写insert注解，添加“”写SQL的查询语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name ( field1, field2,...fieldN )</span><br><span class="line">                       <span class="keyword">VALUES</span></span><br><span class="line">                       ( value1, value2,...valueN );</span><br></pre></td></tr></table></figure>

<p>第一个参数括号中写要传入的参数，values后的括号要加#{}</p>
<p>这样MyBatis可以将Object user中的名为#{}的值自动替换为object中对应值。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Insert</span>(<span class="string">"insert into user (name,accout_id,token,gmt_create,gmt_modified) values (#&#123;name&#125;,#&#123;accountId&#125;,#&#123;token&#125;,#&#123;gmtCreate&#125;,#&#123;gmtModified&#125;)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(User user)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在AuthorizeController中，当user不为空时，将其添加进数据库</p>
<ul>
<li><p>通过注解@Autowired将UserMapper注解进来</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserMapper userMapper;</span><br></pre></td></tr></table></figure>
</li>
<li><p>调用其userMapper的insert方法，新建User对象，用ctrl+alt+v快捷键</p>
</li>
<li><p>设置user的属性</p>
<ul>
<li>token采用UUID来做</li>
<li>name为githubUser的name</li>
<li>id将githubUser的ID转为String类型</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line">            <span class="comment">//set user values</span></span><br><span class="line">            user.setToken(UUID.randomUUID().toString());</span><br><span class="line">            user.setName(githubUser.getName());</span><br><span class="line">            user.setAccountId(String.valueOf(githubUser.getId()));</span><br><span class="line">            user.setGmtCreate(System.currentTimeMillis());</span><br><span class="line">            user.setGmtModified(user.getGmtCreate());</span><br><span class="line">            userMapper.insert(user);</span><br></pre></td></tr></table></figure>

<p> 点击登录后，在数据库中存下了信息。</p>
<p> 当想测试，可以打断点，然后点击debug按钮。</p>
<h3 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h3><ol>
<li><p>无法找到数据库</p>
<p>删除user table，重新添加</p>
</li>
<li><p>找不到ACCOUT_ID Column</p>
<p>在INSERT注解中语法写错，将account_id错写为accout_id，因此在H2数据库中找不到指定的column</p>
</li>
</ol>
<h2 id="获取登录状态"><a href="#获取登录状态" class="headerlink" title="获取登录状态"></a>获取登录状态</h2><p> 以token为依据，绑定前端和后端的登录状态，将token抽取成变量，手动写key和value，手动将session和user进行识别。在数据库中查询是否在数据库中，存在则登录成功，不存在则登陆失败。此时不需要写入session，因为插入数据库的过程相当于写入session，在形参中注入<strong>HttpServletResponse</strong>，通过response写入cookie。</p>
<p> 不知道应该传输什么参数，使用ctrl+P。新建cookie，name为‘“token”，value为之前定义的token。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.addCookie(<span class="keyword">new</span> Cookie(<span class="string">"token"</span>,token));</span><br></pre></td></tr></table></figure>

<p> 此时因为没有写入session，session为空，因此网页上还是显示的是登录。检查网工业源码，在application中找到了自己写入的token。</p>
<p> 需要访问网页时将key为token的cookie信息拿到，因此在indexController中，先注入userMapper(只有在userMapper中才可以访问user)，希望userMapper中有findByToken方法，传入token，然后返回model包中的user对象。在index函数中增加参数<strong>HttpServletRequest</strong>，利用其获得到Cookie，使用ctrl+alt+v，快速生成变量，将得到cookies进行for循环，快捷写法：cookies.for，然后自动变成for循环。如果cookies中含有token，获得其value，为所需要的token。然后userMapper中创建相应方法(alt+回车，快速修复)，获得到user对象。</p>
<blockquote>
<p>设置cookie，使用response；获得cookie，使用request</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Cookie[] cookies = request.getCookies();</span><br><span class="line"><span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">"token"</span>.equals(cookie.getName()))&#123;</span><br><span class="line">        String token = cookie.getValue();</span><br><span class="line">        User user = userMapper.findByToken(token);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 在UserMapper类中新建方法，注解为Select。查询数据库中是否包含token。</p>
<p> MyBatis编译时，将形参中的值放入#{}对应的进行替换，如果是类可以直接进行替换，如果不是类，需要加入注解。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">Select</span>(<span class="string">"select * from user where token = #&#123;token&#125;"</span>)</span><br><span class="line"><span class="keyword">User</span> findByToken(@Param(<span class="string">"token"</span>) <span class="keyword">String</span> token);</span><br></pre></td></tr></table></figure>

<p> user相当于数据库和java类交互的模型，用user类插入数据，从数据库中查询数据返回User类。拿到user类后，需要与前端交互。</p>
<p> 如果user不为空，就将session写入user中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line">    <span class="comment">//默认要求依赖对象必须存在</span></span><br><span class="line">    <span class="meta">@Autowired</span>(required = <span class="keyword">false</span>)</span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">(HttpServletRequest request)</span></span>&#123;</span><br><span class="line">        Cookie[] cookies = request.getCookies();</span><br><span class="line">        <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">"token"</span>.equals(cookie.getName()))&#123;</span><br><span class="line">                String token = cookie.getValue();</span><br><span class="line">                User user = userMapper.findByToken(token);</span><br><span class="line">                <span class="keyword">if</span> (user != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    request.getSession().setAttribute(<span class="string">"user"</span>,user);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="解决的问题"><a href="#解决的问题" class="headerlink" title="解决的问题"></a>解决的问题</h3><p> 如果服务器重启或者链接突然断开，再次连接需要重新登录，比较麻烦，因此将cookie持久化至数据库中，虽然cookie可以存储很多信息，但不应该将私密信息存储在cookie中，cookie中只存储令牌信息或token，从而前后端交互使用。</p>
<h3 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h3><p> 当用户量很大，请求信息很多时，会比较慢。可以用redis等去改进。</p>
<h2 id="集成Flyway-Migration"><a href="#集成Flyway-Migration" class="headerlink" title="集成Flyway Migration"></a>集成Flyway Migration</h2><p> 在获取到用户信息时，GithubUser中的bio没有用到，因此在数据库中添加项，右键user点击modified。但是这样一个人改动，其他人数据库都要重新添加数据库脚本，比较麻烦。</p>
<p> 使用数据库的迁移原因是：自动将不同人的数据库版本进行整合，自动管理数据库版本。</p>
<p> 进入<a href="https://flywaydb.org/getstarted/" target="_blank" rel="noopener">Flyway官网</a>，查看其Maven方式，将其plugin代码拷贝进pom.xml同级标签下，将其url地址更改为application.propertites中字段，user，password也做相应更改。保持数据库版本一致。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span>jdbc:h2:C:/Code/mycommunity<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">user</span>&gt;</span>sa<span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">password</span>&gt;</span>123<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> 创建src/main/resources/db/migration，文件命名方式仿照如下</p>
<blockquote>
<p>src/main/resources/db/migration/V1__Create_person_table.sql</p>
</blockquote>
<p> 新建文件V1__Create_user_table.sql，将之前的sql语句粘贴。</p>
<p> 先删除原数据库，然后运行命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn flyway:migrate</span><br></pre></td></tr></table></figure>

<p> 这样自动生成了新的数据库，而且生成flyway_shema_history文件，记录数据库执行过程，当有多个人执行数据库时，以文件中的记录为准；</p>
<p> 当数据库表格变更时，如要新增一个VARCHAR(256)类型的bio，<strong>不直接在数据库中添加</strong>，而是写好语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">USER</span> <span class="keyword">add</span> bio <span class="built_in">VARCHAR</span>(<span class="number">256</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>可以先在IDEA的数据库中做对应操作，然后复制对应语句，这样不用自己去写语句，但是最后不能点执行，不然flyway操作会失败</p>
</blockquote>
<p> 然后复制要变更的语句，复制在migration文件夹下生成新的文件V2__Add_bio_col_to_user_table.sql，重新运行flyway命令。这样子user数据库便新增了一个col为bio。</p>
<blockquote>
<p>相当于对数据库的每条操作都分批次写在sql文件中，然后运行flyway对对应生成相应的数据库。</p>
</blockquote>
<p> 无论表有多么细小的改动，都要重新创建一个对应的sql文件，不然会抛出异常，因为表对应的状态码改变了。降低数据库维护难度。</p>
<h2 id="Bootstrap编写问题发布界面"><a href="#Bootstrap编写问题发布界面" class="headerlink" title="Bootstrap编写问题发布界面"></a>Bootstrap编写问题发布界面</h2><p> 仿照网站模板去做</p>
<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E5%8F%91%E8%B5%B7%E9%97%AE%E9%A2%98%E6%A8%A1%E6%9D%BF.jpg" class title="This is an example image">

<p> 需要有标题输入框，内容框，标签，确认发起和发起指南。拷贝一份index页面叫做publish。title改为发布-未名社区，上面一栏其他不用改变，在下面去添加内容。</p>
<p> 目测为3:1的左右分割布局，使用<a href="https://v3.bootcss.com/css/#grid" target="_blank" rel="noopener">SpringBoot栅格系统</a>中的流式布局</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> 3:1在栅格系统（12份）下，为9:3，使用大屏幕尺寸，类前缀为.col-lg-，先敲下div.col-lg-9，然后按下<strong>Tab键</strong>，自动生成一个div。</p>
<p> 当屏幕变小的时候，从col-lg-9部分均占据全部页面，即其他尺寸比例变化，不同尺寸比例用<strong>空格</strong>隔开。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-lg-9 col-md-12 col-sm-12 col-xs-12"</span> <span class="attr">style</span>=<span class="string">"background-color: red;height: 300px"</span>;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-lg-3 col-md-12 col-sm-12 col-xs-12"</span> <span class="attr">style</span>=<span class="string">"background-color: green;height: 300px"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> 其中背景色，高度均为style下的属性，不同属性间用分号隔开。</p>
<p> 进入publish网页，需要写PublishController。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PublishController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/publish"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">publish</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"publish"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 进入publish界面，可以看到在正常窗口下是9:3比例，当界面缩小后，变成了红色在上，绿色在下，均铺满整个窗口。</p>
<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E5%A4%A7%E5%B1%8F%E5%B9%95%E5%B0%BA%E5%AF%B8.jpg" class title="This is an example image">

<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E5%85%B6%E4%BB%96%E5%B1%8F%E5%B9%95%E5%B0%BA%E5%AF%B8.jpg" class title="This is an example image">

<p>页面中需要一个输入框，使用组件，有一个发起，找到好看的icon。在div中加入标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-search"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> 将class中名称替换为所需要的，然后加入h2，文本为发起。span为h2块置元素，将其放在h2中。</p>
<p> 增加基本输入框，被form包裹，action为点击时所提交地址。placeholder为当没有输入时，默认显示文字。修改type为text，id和for为title，增加name为title。</p>
<p> 下面为问题补充，为文本输入框，因此在label下增加textarea标签，加入class。</p>
<p> 标签页需要输入框，再增加绿色的提交按钮。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-success"</span>&gt;</span>（成功）Success<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> 最后上面一部分代码为</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"title"</span>&gt;</span>问题标题（简单扼要）：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"title"</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">placeholder</span>=<span class="string">"问题标题..."</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"title"</span>&gt;</span>问题补充（必填：请参照右边提示）：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">id</span>=<span class="string">"description"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">cols</span>=<span class="string">"30"</span> <span class="attr">rows</span>=<span class="string">"10"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"title"</span>&gt;</span>添加标签：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"tag"</span> <span class="attr">name</span>=<span class="string">"tag"</span> <span class="attr">placeholder</span>=<span class="string">"输入标签，以，号分隔"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-success"</span>&gt;</span>发布<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> 然后为增加问题发布导航界面。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-lg-3 col-md-12 col-sm-12 col-xs-12"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h3</span>&gt;</span>问题发起指南<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    ● 问题标题：请用精简的语言描述您发布的问题，不超过25字</span><br><span class="line">    ● 问题补充：详细描述您的问题内容，并确保问题描述清晰直观，并提供一些相关的资料</span><br><span class="line">    ● 选择标签：选择一个或者多个合适的标签，用逗号隔开，每个标签不超过10个字</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> 得到效果为</p>
<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E9%97%AE%E9%A2%98%E5%8F%91%E5%B8%83%E7%95%8C%E9%9D%A2.png" class title="This is an example image">

<p>进一步修复样式，通过<strong>检查</strong>来做。在浏览器中编辑，实时预览，然后拷贝代码。</p>
<p> 发现这一部分的代码应该放在nav外层，使用ctrl+w同时选中上下层。将其放在nav下面。</p>
<p> 在static/css下面增加community.css文件</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 将其拷贝至publish页面中。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/community.css"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p> 在提问部分的div class中加上main</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid main"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> 这样将导航和问题发布界面隔开。</p>
<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/margin30.jpg" class title="This is an example image">

<p>为了有突出效果，将最外层的body颜色改为灰色，将内容发布界面颜色改为白色。让发布按钮飘在右边。加入float</p>
<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E5%8F%91%E5%B8%83%E6%8C%89%E9%92%AE.jpg" class title="This is an example image">

<p> 修改css代码，增加body，修改颜色为灰色，修改main部分颜色为白色。增加btn-publish按钮。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#efefef</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: white;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-publish</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 在button的class后面进行追加</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-success btn-publish"</span>&gt;</span>发布<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> 这样样式基本达成效果。</p>
<p> 网页添加部分完整代码为</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid main"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-lg-9 col-md-12 col-sm-12 col-xs-12"</span> ;&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-plus"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>发起<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"title"</span>&gt;</span>问题标题（简单扼要）：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"title"</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">placeholder</span>=<span class="string">"问题标题..."</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"title"</span>&gt;</span>问题补充（必填：请参照右边提示）：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">id</span>=<span class="string">"description"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">cols</span>=<span class="string">"30"</span> <span class="attr">rows</span>=<span class="string">"10"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"title"</span>&gt;</span>添加标签：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"tag"</span> <span class="attr">name</span>=<span class="string">"tag"</span> <span class="attr">placeholder</span>=<span class="string">"输入标签，以，号分隔"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-success btn-publish"</span>&gt;</span>发布<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-lg-3 col-md-12 col-sm-12 col-xs-12"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>问题发起指南<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            ● 问题标题：请用精简的语言描述您发布的问题，不超过25字</span><br><span class="line">            ● 问题补充：详细描述您的问题内容，并确保问题描述清晰直观，并提供一些相关的资料</span><br><span class="line">            ● 选择标签：选择一个或者多个合适的标签，用逗号隔开，每个标签不超过10个字</span><br><span class="line">            <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="发布文章"><a href="#发布文章" class="headerlink" title="发布文章"></a>发布文章</h2><h3 id="创建Table，存储发布者数据"><a href="#创建Table，存储发布者数据" class="headerlink" title="创建Table，存储发布者数据"></a>创建Table，存储发布者数据</h3><p>数据库数据包括：id(primary key), title, descrption, gmt_create, gmt_modified, creator, comment_count, view_count, like_count, tag。基本思路为先利用IDEA添加所需要的信息，然后复制生成的表格代码如下</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> question</span><br><span class="line">(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">int</span> auto_increment,</span><br><span class="line">	title <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">	description <span class="built_in">TEXT</span>,</span><br><span class="line">	gmt_create <span class="built_in">BIGINT</span>,</span><br><span class="line">	gmt_modified <span class="built_in">BIGINT</span>,</span><br><span class="line">	creator <span class="built_in">int</span>,</span><br><span class="line">	comment_count <span class="built_in">int</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line">	view_count <span class="built_in">int</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line">	like_count <span class="built_in">int</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line">	tag <span class="built_in">VARCHAR</span>(<span class="number">256</span>),</span><br><span class="line">	<span class="keyword">constraint</span> question_pk</span><br><span class="line">		primary <span class="keyword">key</span> (<span class="keyword">id</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>​    在Flyway中创建新脚本，命名为V3__Create_question_table.sql。将sql代码粘贴进此文件，运行命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn flyway:migrate</span><br></pre></td></tr></table></figure>

<h3 id="写Mapper文件"><a href="#写Mapper文件" class="headerlink" title="写Mapper文件"></a>写Mapper文件</h3><p>在mapper包下新建类QuestionMapper，增加Mapper注解，将类更改为interface，写create函数，需要传入question类，然后增加Insert注解，写入相关sql语句，即 insert into (写表中需要插入名称) values (#{question类中相关变量名称})</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">QuestionMapper</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Insert</span>(<span class="string">"insert into question (title,description,gmt_create,gmt_modified,creator,tag) values (#&#123;title&#125;,#&#123;description&#125;,#&#123;gmtCreate&#125;,#&#123;gmtModified&#125;,#&#123;creator&#125;,#&#123;tag&#125;)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">create</span><span class="params">(Question question)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    在model包中添加类Question，包含以下变量，并alt+insert创建getter和setter方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String title;</span><br><span class="line"><span class="keyword">private</span> String description;</span><br><span class="line"><span class="keyword">private</span> String tag;</span><br><span class="line"><span class="keyword">private</span> Long gmtCreate;</span><br><span class="line"><span class="keyword">private</span> Long gmtModified;</span><br><span class="line"><span class="keyword">private</span> Integer creator;</span><br><span class="line"><span class="keyword">private</span> Integer viewCount;</span><br><span class="line"><span class="keyword">private</span> Integer commentCount;</span><br><span class="line"><span class="keyword">private</span> Integer likeCount;</span><br></pre></td></tr></table></figure>

<p>​    修改publish.html中回答问题部分，添加form后面内容，action路由到publish界面，提交post请求</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/publish"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​    get为渲染页面，post为执行请求。在PublishController中增加方法</p>
<p>​    仍然返回publish界面，前后端未分离带来。增加PostMapping注解，接收参数title,description,tag。利用Autowired持有questionmapper，并调用其create方法。ctrl+P查看其需要参数，需要question，新建一个question，ctrl+alt+v，将变量抽取出来。给question设置变量。shift+回车，换行。</p>
<p>​    为了获取到user，可以利用index中的利用cookie来获取。request利用HttpServletRequest注入，usermapper利用@Autowired自动注入。为了在服务端API接口级别传递到页面中，将要传递的写入Model。</p>
<p>如果获取到的user为空，则需要给model传入错误信息，并且回到publish界面。如果有错误提示，alt+回车。将信息填入后，回到首页。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> QuestionMapper questionMapper;</span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@PostMapping</span>(<span class="string">"/publish"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">doPublish</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">           @RequestParam(<span class="string">"title"</span>)</span> String title,</span></span><br><span class="line"><span class="function">           @<span class="title">RequestParam</span><span class="params">(<span class="string">"description"</span>)</span> String description,</span></span><br><span class="line"><span class="function">           @<span class="title">RequestParam</span><span class="params">(<span class="string">"tag"</span>)</span> String tag,</span></span><br><span class="line"><span class="function">           HttpServletRequest request,</span></span><br><span class="line"><span class="function">           Model model)</span>&#123;</span><br><span class="line">       User user = <span class="keyword">null</span>;</span><br><span class="line">       Cookie[] cookies = request.getCookies();</span><br><span class="line">       <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">           <span class="keyword">if</span> (<span class="string">"token"</span>.equals(cookie.getName()))&#123;</span><br><span class="line">               String token = cookie.getValue();</span><br><span class="line">               user = userMapper.findByToken(token);</span><br><span class="line">               <span class="keyword">if</span> (user != <span class="keyword">null</span>)&#123;</span><br><span class="line">                   request.getSession().setAttribute(<span class="string">"user"</span>,user);</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span> (user == <span class="keyword">null</span>)&#123;</span><br><span class="line">           model.addAttribute(<span class="string">"error"</span>,<span class="string">"用户未登陆"</span>);</span><br><span class="line">           <span class="keyword">return</span> <span class="string">"publish"</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       Question question = <span class="keyword">new</span> Question();</span><br><span class="line">       question.setTitle(title);</span><br><span class="line">       question.setDescription(description);</span><br><span class="line">       question.setTag(tag);</span><br><span class="line">       question.setCreator(user.getId());</span><br><span class="line">       question.setGmtCreate(System.currentTimeMillis());</span><br><span class="line">       question.setGmtModified(question.getGmtModified());</span><br><span class="line"></span><br><span class="line">       questionMapper.create(question);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">"redirect:/"</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>​    为了提示错误信息，在publish.html界面，在提交问题的上方，增加一个span，修改class为bootstrap中的警告框，文本为错误信息。</p>
<p>​    继续包裹一个流式布局，希望其充满整个屏幕，将错误提示报告和提交按钮放至流式布局下。警告框最大化屏幕为9，当页面缩写后为12。button给其对应的class。</p>
<p>​    但是效果不是太好，警告框比提交框更宽。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container-fluid main "</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"alert alert-danger col-lg-9 col-md-12 col-sm-12 col-xs-12"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;error&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-success btn-publish col-lg-3 col-md-12 col-sm-12 col-xs-12"</span>&gt;</span></span><br><span class="line">    发布</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E8%AD%A6%E5%91%8A%E6%A1%861.png" class title="This is an example image">

<p>为了只有在error不等于null的时候才展示，增加if标签。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"alert alert-danger col-lg-9 col-md-12 col-sm-12 col-xs-12"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;error&#125;"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">th:if</span>=<span class="string">"$&#123;error != null&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​    将button的流式布局重新放在一个div中，然后将button放置在此div下。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-lg-3 col-md-12 col-sm-12 col-xs-12"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-success btn-publish"</span>&gt;</span></span><br><span class="line">    发布</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>为了让index与public联系起来，在首页上加上发布按钮，点击后跳转到发布界面。加入li标签，在li标签下加入a标签来指向超链接，也需要将这部分拷贝至publish的html文件中，这样改动一个页面，也要将另一个页面进行更改，比较麻烦。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">th:if</span>=<span class="string">"$&#123;session.user != null&#125;"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/publish"</span>&gt;</span>发布<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>当报错的时候，在publish界面上填的信息是没有的，因此在PublishController中，将这些信息注入到model中，这样可以在html页面获取。同时为了防止用户输入空信息提交，进行校验</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置输入不能为空</span></span><br><span class="line">      <span class="keyword">if</span> (title == <span class="keyword">null</span> || title == <span class="string">""</span>)&#123;</span><br><span class="line">          model.addAttribute(<span class="string">"error"</span>,<span class="string">"标题不能为空"</span>);</span><br><span class="line">          <span class="keyword">return</span> <span class="string">"publish"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (description == <span class="keyword">null</span> || description == <span class="string">""</span>)&#123;</span><br><span class="line">          model.addAttribute(<span class="string">"error"</span>,<span class="string">"描述不能为空"</span>);</span><br><span class="line">          <span class="keyword">return</span> <span class="string">"publish"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (tag == <span class="keyword">null</span> || tag == <span class="string">""</span>)&#123;</span><br><span class="line">          model.addAttribute(<span class="string">"error"</span>,<span class="string">"标签不能为空"</span>);</span><br><span class="line">          <span class="keyword">return</span> <span class="string">"publish"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      model.addAttribute(<span class="string">"title"</span>,title);</span><br><span class="line">      model.addAttribute(<span class="string">"description"</span>,description);</span><br><span class="line">      model.addAttribute(<span class="string">"tag"</span>,tag);</span><br></pre></td></tr></table></figure>

<p>在publish.html进行修改，在title，description，tag标签中添加用户输入的显示如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"title"</span>&gt;</span>问题标题（简单扼要）：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;title&#125;"</span> <span class="attr">id</span>=<span class="string">"title"</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">placeholder</span>=<span class="string">"问题标题..."</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"description"</span>&gt;</span>问题补充（必填：请参照右边提示）：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;description&#125;"</span> <span class="attr">id</span>=<span class="string">"description"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">cols</span>=<span class="string">"30"</span> <span class="attr">rows</span>=<span class="string">"10"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"tag"</span>&gt;</span>添加标签：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;tag&#125;"</span> <span class="attr">id</span>=<span class="string">"tag"</span> <span class="attr">name</span>=<span class="string">"tag"</span> <span class="attr">placeholder</span>=<span class="string">"输入标签，以，号分隔"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在调试的时候，发现当输入标题，但不输入问题补充的时候，error会提示，但是标题部分没有回写下来，原因是将model.attribute放到了校验下方，因此不能显示出来。将model注入调整到最上面，这时候发现标题的显示位置不在value中</p>
<img src="/2019/12/29/SpringBoot-%E5%AD%A6%E4%B9%A0/%E6%A0%87%E9%A2%98%E9%94%99%E4%BD%8D.png" class title="This is an example image">

<p>去搜索：thymeleaf input，发现不能通过使用text获得值，要使用value，而描述使用value无法获取，需要使用text。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;title&#125;"</span> <span class="attr">id</span>=<span class="string">"title"</span> <span class="attr">name</span>=<span class="string">"title"</span> 		<span class="attr">placeholder</span>=<span class="string">"问题标题..."</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;description&#125;"</span> <span class="attr">id</span>=<span class="string">"description"</span> <span class="attr">class</span>=<span class="string">"form-			control"</span> <span class="attr">cols</span>=<span class="string">"30"</span> <span class="attr">rows</span>=<span class="string">"10"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;tag&#125;"</span> <span class="attr">id</span>=<span class="string">"tag"</span> <span class="attr">name</span>=<span class="string">"tag"</span> 				<span class="attr">placeholder</span>=<span class="string">"输入标签，以，号分隔"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>发布文章总结：</p>
<p>1、在html中form表单中填action，即为提交请求的地址，post路由到/publish中，当点击submit，会寻找地址为publish，请求为post的接口，注入到doPublish方法中</p>
<p>2、接收标题，描述，标签信息，放入model中以便于页面的回显</p>
<p>3、验证接收信息是否不为空，如果为空，注入到error中</p>
<p>4、验证是否登录，通过token拿到数据库中存的user信息，若user信息存在则绑定到session中；若不存在，将错误信息注入，返回到前端中</p>
<p>5、全部工作后，构建question对象，创建questionMapper，插入至数据库</p>
<p>因此接下来需要将发布的问题显示在首页中。</p>
<h1 id="Spring知识总结"><a href="#Spring知识总结" class="headerlink" title="Spring知识总结"></a>Spring知识总结</h1><h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><ol>
<li><p>Controller</p>
<blockquote>
<p>@Controller，将当前类作为路由API的一个承载者</p>
</blockquote>
</li>
<li><p>GetMapping</p>
<blockquote>
<p>@GetMapping，确保对其中内容的HTTP GET请求映射到greeting方法</p>
</blockquote>
</li>
<li><p>Component</p>
<blockquote>
<p>@Component 仅仅把当前类初始化Spring容器的上下文，这样调用时不用实例化对象，IOC，便于去调用对象</p>
</blockquote>
</li>
<li><p>Autowired</p>
<blockquote>
<p>@Autowired注解将Spring容器中的写好的实例化的实例加载到当前使用的上下文</p>
</blockquote>
</li>
<li><p>Value</p>
<blockquote>
<p>@Value(“${string}”)，在配置文件中读取key为string的value</p>
</blockquote>
</li>
</ol>
<h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><ul>
<li>在类和类之间传输用DTO，在数据库中使用model</li>
</ul>
<h1 id="快捷键技巧"><a href="#快捷键技巧" class="headerlink" title="快捷键技巧"></a>快捷键技巧</h1><h3 id="IDEA快捷键"><a href="#IDEA快捷键" class="headerlink" title="IDEA快捷键"></a>IDEA快捷键</h3><ul>
<li>ctrl + P：提示输入参数类型</li>
<li>ctrl + shift+n 快速<strong>查找</strong>文件</li>
<li>shift + F6 更改名称</li>
<li>ctrl + shift + F12 切换最大屏</li>
<li>alt + 鼠标左键按住拖动，实现对多行的批量修改</li>
<li>alt + insert 提示创建get和set</li>
<li>选中指定部分，alt + 回车，引入jar包</li>
<li>ctrl + alt + v 选中new Class，快速创建其变量</li>
<li>按住shift + 回车 自动换到当前光标的下一行</li>
<li>ctrl + e 切回最近的一个访问窗口</li>
<li>右键Git/history，可以看到历史提交信息时当前目录的情况</li>
<li>shift+F6 将所有同名变量更名</li>
<li>变量.for 完成对某变量的for循环</li>
<li>alt+回车 修复</li>
<li>右键Git revert，将某个文件还原至Git提交状态</li>
<li>ctrl+w同时选中上下层</li>
<li>ctrl+alt+l 简单格式化</li>
</ul>
<h3 id="其他快捷键"><a href="#其他快捷键" class="headerlink" title="其他快捷键"></a>其他快捷键</h3><ul>
<li>ctrl+shift+n 打开新的匿名窗口</li>
</ul>
<p>学到知识</p>
<ol>
<li>Maven是管理包和包的依赖的工具，pom.xml中包括所有运行Spring项目需要的包，主要为依赖parent</li>
<li>gitignore用于只提交部分的代码，避免一些文件冲突</li>
<li>学习一个新东西先进官网去学习，先拷贝进自己项目跑起来</li>
<li>当编程参数超过2个，不要使用形参传入，而是封装成对象</li>
</ol>
<h1 id="资源支持"><a href="#资源支持" class="headerlink" title="资源支持"></a>资源支持</h1><ul>
<li><a href="https://spring.io/guides" target="_blank" rel="noopener">Spring官方文档</a></li>
<li><a href="https://spring.io/guides/gs/serving-web-content/" target="_blank" rel="noopener">Serving Web Content with Spring MVC</a></li>
<li><a href="https://elasticsearch.cn/" target="_blank" rel="noopener">elastic社区</a></li>
<li><a href="https://v3.bootcss.com/getting-started/#download" target="_blank" rel="noopener">BootStrap</a></li>
<li><a href="https://developer.github.com/apps/" target="_blank" rel="noopener">OAuth Apps文档</a></li>
<li><a href="https://www.visual-paradigm.com" target="_blank" rel="noopener">Visual Paradig</a></li>
<li><a href="https://square.github.io/okhttp/" target="_blank" rel="noopener">OkHttp</a></li>
<li><a href="https://mvnrepository.com/" target="_blank" rel="noopener">Maven包查询</a></li>
<li><a href="http://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/" target="_blank" rel="noopener">MyBatis官方资料</a></li>
<li><a href="https://docs.spring.io/spring-boot/docs/2.0.0.RC1/reference/htmlsingle/#boot-features-embedded-database-support" target="_blank" rel="noopener">Spring文档</a></li>
<li><a href="https://www.runoob.com/mysql/mysql-tutorial.html" target="_blank" rel="noopener">MySQL菜鸟教程资料</a></li>
<li><a href="https://flywaydb.org/getstarted/" target="_blank" rel="noopener">Flyway官网</a></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/SpringBoot/" rel="tag"># SpringBoot</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/12/29/markdown%E4%BD%BF%E7%94%A8/" rel="prev" title="markdown使用">
      <i class="fa fa-chevron-left"></i> markdown使用
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/01/07/Java%E7%88%AC%E8%99%AB/" rel="next" title="Java爬虫">
      Java爬虫 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringBoot学习"><span class="nav-number">1.</span> <span class="nav-text">SpringBoot学习</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#涉及的一些知识点"><span class="nav-number">1.1.</span> <span class="nav-text">涉及的一些知识点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#项目创建"><span class="nav-number">1.2.</span> <span class="nav-text">项目创建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#初始创建文件夹"><span class="nav-number">1.2.1.</span> <span class="nav-text">初始创建文件夹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网址构成"><span class="nav-number">1.2.2.</span> <span class="nav-text">网址构成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#正式编程"><span class="nav-number">1.2.3.</span> <span class="nav-text">正式编程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#实现输入网址返回可视化界面"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">实现输入网址返回可视化界面</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#文档说明"><span class="nav-number">1.2.3.1.1.</span> <span class="nav-text">文档说明</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#实际操作"><span class="nav-number">1.2.3.1.2.</span> <span class="nav-text">实际操作</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#将代码放至Github托管"><span class="nav-number">1.3.</span> <span class="nav-text">将代码放至Github托管</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#简单流程"><span class="nav-number">1.3.1.</span> <span class="nav-text">简单流程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#明确需求"><span class="nav-number">1.4.</span> <span class="nav-text">明确需求</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#目标效果"><span class="nav-number">1.4.1.</span> <span class="nav-text">目标效果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Bootstrap"><span class="nav-number">1.5.</span> <span class="nav-text">Bootstrap</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本认识"><span class="nav-number">1.5.1.</span> <span class="nav-text">基本认识</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bootstrap编写导航栏样式"><span class="nav-number">1.5.2.</span> <span class="nav-text">Bootstrap编写导航栏样式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#利用Github-App实现登录"><span class="nav-number">1.6.</span> <span class="nav-text">利用Github App实现登录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建APP"><span class="nav-number">1.6.1.</span> <span class="nav-text">创建APP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Github登录流程"><span class="nav-number">1.6.2.</span> <span class="nav-text">Github登录流程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#调用authorize"><span class="nav-number">1.6.2.1.</span> <span class="nav-text">调用authorize</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取code"><span class="nav-number">1.6.2.2.</span> <span class="nav-text">获取code</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取用户信息"><span class="nav-number">1.6.2.3.</span> <span class="nav-text">获取用户信息</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置文件的分离application-proerties"><span class="nav-number">1.7.</span> <span class="nav-text">配置文件的分离application.proerties</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Session和Cookies原理和实现"><span class="nav-number">1.8.</span> <span class="nav-text">Session和Cookies原理和实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL基本概念及语法"><span class="nav-number">1.9.</span> <span class="nav-text">MySQL基本概念及语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#H2数据库"><span class="nav-number">1.10.</span> <span class="nav-text">H2数据库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#集成MyBatis并实现插入操作"><span class="nav-number">1.11.</span> <span class="nav-text">集成MyBatis并实现插入操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#报错"><span class="nav-number">1.11.1.</span> <span class="nav-text">报错</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取登录状态"><span class="nav-number">1.12.</span> <span class="nav-text">获取登录状态</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#解决的问题"><span class="nav-number">1.12.1.</span> <span class="nav-text">解决的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#存在的问题"><span class="nav-number">1.12.2.</span> <span class="nav-text">存在的问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#集成Flyway-Migration"><span class="nav-number">1.13.</span> <span class="nav-text">集成Flyway Migration</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Bootstrap编写问题发布界面"><span class="nav-number">1.14.</span> <span class="nav-text">Bootstrap编写问题发布界面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#发布文章"><span class="nav-number">1.15.</span> <span class="nav-text">发布文章</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建Table，存储发布者数据"><span class="nav-number">1.15.1.</span> <span class="nav-text">创建Table，存储发布者数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#写Mapper文件"><span class="nav-number">1.15.2.</span> <span class="nav-text">写Mapper文件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring知识总结"><span class="nav-number">2.</span> <span class="nav-text">Spring知识总结</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#注解"><span class="nav-number">2.1.</span> <span class="nav-text">注解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#基础"><span class="nav-number">2.2.</span> <span class="nav-text">基础</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#快捷键技巧"><span class="nav-number">3.</span> <span class="nav-text">快捷键技巧</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#IDEA快捷键"><span class="nav-number">3.0.1.</span> <span class="nav-text">IDEA快捷键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他快捷键"><span class="nav-number">3.0.2.</span> <span class="nav-text">其他快捷键</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#资源支持"><span class="nav-number">4.</span> <span class="nav-text">资源支持</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="未名Hugh"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">未名Hugh</p>
  <div class="site-description" itemprop="description">技术博客，Java，Spring Boot，并发编程，网络编程</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">未名Hugh</span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.6.0
  </div>
-->

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共117.5k字</span>
</div>
        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>

<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/clicklove.js"></script>